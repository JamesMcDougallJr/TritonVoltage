import serial
import time
PORT="/dev/ttyACM0"
def reading():
    with serial.Serial(PORT) as ser:
        line = []
        while True:
            try:
                char = ser.read(1).decode()
                print(char)
                if char == '\n':
                    print('found newline')
                    # then the end of a line, flush the line.
                    if len(line) != 3:
                        # then there was an error.
                        return []
                    else:
                        return condense(line)
                else:
                    line.append(char)
            except:
                continue

def condense(line):
    nums = []
    current = ''
    for char in line:
        if char != ',':
            current += char
        else:
            nums.append(int(current))
    return nums

if __name__ == '__main__':
    print(reading())
